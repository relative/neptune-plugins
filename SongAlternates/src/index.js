var y=[];import{modules as h}from"@neptune";var _=h.find(i=>i.exports?.createElement);if(!_)throw new Error("Couldn't find React module");var l=_.exports;import{actions as p}from"@neptune";var k=()=>{};async function x(i,o,e){return new Promise((t,a)=>{let c=o<=0?k:clearTimeout.bind(null,setTimeout(async()=>{c(),e&&await e(),a(new Error("Timeout exceeded"))},o)),n=async()=>{try{e&&await e()}catch(r){console.warn("Error in asyncClearTimer",r)}};return i(r=>n().then(s=>t(r)),r=>n().then(s=>a(r)))})}import{intercept as S}from"@neptune";function m(i,o){return i.type===o}function f(i,o=5e3,e){let t=new Set;return x((a,c)=>{for(let n of i)t.add(S(n,([r])=>{let s={type:n,payload:r},d=!1;return typeof e<"u"&&(typeof e=="boolean"?d=e:Array.isArray(e)?d=e.includes(s.type):d=e(s)),a(s),!d}))},o,()=>{t.forEach(a=>a()),t.clear()})}var b={key:!0,ref:!0,__self:!0,__source:!0,children:!0},{hasOwnProperty:D}=Object.prototype;function T(i,o,e){let t=null,a=null,c=null,n={};e!==void 0&&(t=""+e),o.key!==void 0&&(t=""+o.key),o.ref!==void 0&&(a=o.ref),o.children!==void 0&&(c=o.children);for(let r in o)D.call(o,r)&&!b.hasOwnProperty(r)&&(n[r]=o[r]);if(i&&i.defaultProps){let r=i.defaultProps;for(let s in r)n[s]===void 0&&(n[s]=r[s])}return l.createElement(i,n,c)}var R=T,F=l.Fragment;var A=l,u=new Proxy({},{get(i,o,e){let t=Reflect.get(i,o,e);return t||R("span",{children:["component ",o," has not been captured yet"]})}});y.push((i=>{A._createElement||(A._createElement=i);function o({children:e,...t}){let a=T(u.ContextMenu,{...t,__ignore:!0}),c=T(u.ContextMenuAction,{title:"Replace track",action:async()=>{let n=t.mediaItem?.item?.title+" "+t.mediaItem?.item?.artist?.name;p.modal.showPickTrackModal({promptId:666,userId:666}),p.search.searchTrackForTrackPicker({limit:10,searchPhrase:n}),p.trackPrompts.setTrackSearchPhrase(encodeURIComponent(n));let r=await f(["trackPrompts/SET_TRACK_FOR_PROMPT","modal/CLOSE"],0,["trackPrompts/SET_TRACK_FOR_PROMPT"]);if(m(r,"trackPrompts/SET_TRACK_FOR_PROMPT")){let s=t.playlistData.currentPlaylistUuid,d=t.playlistData.currentOrder??"INDEX",I=t.playlistData.currentDirection??"ASC",E=t.playlistData.mediaItemId;p.content.addMediaItemsToPlaylist({playlistUUID:s,onDupes:"ADD",showNotification:!0,addToIndex:t.index,mediaItemIdsToAdd:[parseInt(r.payload.trn.split(":").reverse()[0])]});let P=await f(["content/ADD_MEDIA_ITEMS_TO_PLAYLIST_FAIL","content/ADD_MEDIA_ITEMS_TO_PLAYLIST_SUCCESS"]);m(P,"content/ADD_MEDIA_ITEMS_TO_PLAYLIST_SUCCESS")?p.content.removeMediaItemsFromPlaylist({currentDirection:I,currentOrder:d,mediaItemId:E,playlistUUID:s,removeIndices:[t.index+1],moduleId:null}):m(P,"content/ADD_MEDIA_ITEMS_TO_PLAYLIST_FAIL")}else m(r,"modal/CLOSE")}});return a._type=a._type||a.type,a.type=function(...n){let r=a._type.apply(this,arguments);return t.playlistData?.currentPlaylistUuid&&r.props.children[1].props.children.push(c),r},a}return l.createElement=function(e,t,...a){if(!t?.__ignore){let n=e.toString();n.includes('"whitespace"===')&&(u.ContextMenuAction=e),n.includes("artist")&&n.includes("bodyDemi")&&n.includes("descriptionDemi")&&n.includes("textSecondary")&&n.includes("play-button")&&(u.PromptItemCell=e),n.includes("t-go-to-album")&&n.includes("trackList")&&n.includes("playQueue")&&e!==o&&(u.ContextMenu=e,e=o)}return i.call(this,e,t,...a)},()=>l.createElement=i})(A._createElement||l.createElement));function V(){y.forEach(i=>i())}export{V as onUnload};
//# sourceMappingURL=index.js.map
